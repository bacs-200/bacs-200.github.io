<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chapter 3: Organizing Complex Content</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f5f5f4; }
    .tab-btn.active { background-color: #0ea5e9; color: white; border-color: #0ea5e9; }
    .tab-btn { transition: all 0.2s ease-in-out; }
    
    /* NEW: Styles for smooth transitions */
    .content-section { display: none; opacity: 0; transition: opacity 0.3s ease-in-out; }
    .content-section.active { display: block; }
    .content-section.show { opacity: 1; }

    .code-block { background-color: #282c34; color: #abb2bf; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; position: relative; font-family: 'Courier New', Courier, monospace; }
    .code-block pre, .code-block code { white-space: pre-wrap; word-wrap: break-word; }
    .code-block .code-highlight { background-color: rgba(14, 165, 233, 0.2); border-radius: 0.2rem; }
    .code-block .tag { color: #e06c75; }
    .code-block .attr { color: #d19a66; }
    .code-block .string { color: #98c379; }

    .preview-pane { border: 1px solid #e7e5e4; padding: 1rem; border-radius: 0.5rem; background-color: #fafaf9; }
    .table-interactive th, .table-interactive td { transition: background-color 0.2s ease-in-out; }
    .table-interactive .highlight, .site-map-node.highlight { outline: 2px solid #0ea5e9; outline-offset: 2px; background-color: rgba(14, 165, 233, 0.1); }
    .site-map-node { transition: all 0.2s ease-in-out; cursor: pointer; }
  </style>
</head>
<body class="text-stone-800">

<div class="container mx-auto max-w-6xl p-4 sm:p-6 lg:p-8">
  <header class="text-center mb-4">
    <h1 class="text-4xl font-bold text-stone-900">Chapter 3: Organizing Complex Content</h1>
    <p class="mt-2 text-lg text-stone-600">Master tables and site-wide navigation to build more structured websites.</p>
  </header>
  <div class="mb-6 text-sm text-stone-600 text-center">
    <a href="index.html" class="text-sky-600 hover:underline">&larr; Back to Table of Contents</a>
  </div>

  <nav class="mb-8 p-1 bg-stone-200 rounded-lg flex flex-wrap justify-center gap-2">
    <button class="tab-btn flex-grow px-4 py-2 rounded-md font-semibold border-2 border-transparent" data-tab="create-tables">3.1 Anatomy of a Table</button>
    <button class="tab-btn flex-grow px-4 py-2 rounded-md font-semibold border-2 border-transparent" data-tab="populate-tables">3.2 Interactive Table Content</button>
    <button class="tab-btn flex-grow px-4 py-2 rounded-md font-semibold border-2 border-transparent" data-tab="navigation">3.3 Building Site Navigation</button>
  </nav>

  <main>
    <section id="create-tables" class="content-section space-y-8">
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <h2 class="text-2xl font-bold mb-4">3.1 Anatomy of a Table</h2>
        <p class="text-stone-600 mb-6">Tables organize data in rows and columns. They have three main semantic parts: a head `<thead>`, a body `<tbody>`, and a footer `<tfoot>`. Hover over the table preview to see how the code and the visual result are connected.</p>
        <div class="grid lg:grid-cols-2 gap-6">
          <div class="preview-pane">
            <h3 class="font-semibold mb-2">Interactive Preview: Class Schedule</h3>
            <table id="anatomy-table" class="w-full text-left border-collapse table-interactive">
              <caption class="text-stone-500 text-sm mb-2" data-part="caption" data-desc="The <caption> tag provides a title for your table, which is great for accessibility.">Fall Semester Schedule</caption>
              <thead data-part="thead" data-desc="The <thead> (Table Head) acts as the header for your table. It contains the column titles, like in a spreadsheet. It tells the browser 'this is the top row'.">
                <tr class="bg-stone-100" data-part="tr" data-desc="The <tr> (Table Row) tag creates a new row within any section of the table.">
                  <th class="border p-2" data-part="th" data-desc="The <th> (Table Header) tag is used for column titles. Browsers usually make them bold and centered by default.">Course</th>
                  <th class="border p-2" data-part="th" data-desc="The <th> (Table Header) tag is used for column titles.">Time</th>
                  <th class="border p-2" data-part="th" data-desc="The <th> (Table Header) tag is used for column titles.">Instructor</th>
                </tr>
              </thead>
              <tbody data-part="tbody" data-desc="The <tbody> (Table Body) contains the main data of your table, with each row representing an entry.">
                <tr class="odd:bg-stone-50" data-part="tr" data-desc="The <tr> (Table Row) tag creates a new row.">
                  <td class="border p-2" data-part="td" data-desc="The <td> (Table Data) tag holds a single piece of data, also known as a cell.">Web Development 101</td>
                  <td class="border p-2" data-part="td" data-desc="A <td> cell.">10:00 AM</td>
                  <td class="border p-2" data-part="td" data-desc="A <td> cell.">Dr. Ada Lovelace</td>
                </tr>
                <tr class="odd:bg-stone-50" data-part="tr" data-desc="The <tr> (Table Row) tag creates a new row.">
                  <td class="border p-2" data-part="td" data-desc="A <td> cell.">CSS Adventures</td>
                  <td class="border p-2" data-part="td" data-desc="A <td> cell.">1:00 PM</td>
                  <td class="border p-2" data-part="td" data-desc="A <td> cell.">Prof. HÃ¥kon Lie</td>
                </tr>
              </tbody>
              <tfoot data-part="tfoot" data-desc="The <tfoot> (Table Foot) is for summary information at the bottom of the table, like totals or footnotes.">
                <tr class="bg-stone-100" data-part="tr" data-desc="The <tr> (Table Row) tag creates a new row.">
                  <td class="border p-2 text-stone-500 italic" colspan="3" data-part="td" data-desc="A <td> cell. The 'colspan' attribute makes this cell span across 3 columns.">Total Credits: 6</td>
                </tr>
              </tfoot>
            </table>
          </div>
          <div id="table-info-box" class="code-block">
            <h4 class="font-semibold text-white mb-2">Code Breakdown</h4>
            <div id="table-info-desc" class="text-sm text-stone-400 mb-4">Hover over the table preview to learn about its parts.</div>
            <pre><code id="table-code-display"></code></pre>
          </div>
        </div>
      </div>
    </section>

    <section id="populate-tables" class="content-section space-y-8">
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <h2 class="text-2xl font-bold mb-4">3.2 Interactive Table Content</h2>
        <p class="text-stone-600 mb-6">Table cells (`<td>`) are powerful containers. You can put almost any HTML element inside them. Try editing a hero's name below to see the code update instantly!</p>
        <div class="grid lg:grid-cols-2 gap-6">
          <div class="preview-pane overflow-x-auto">
            <h3 class="font-semibold mb-2">Live-Edit Superhero Roster</h3>
            <table class="w-full text-sm text-left border-collapse">
              <thead>
                <tr class="bg-stone-100">
                  <th class="border p-2">Name</th>
                  <th class="border p-2">Image</th>
                  <th class="border p-2">Abilities</th>
                  <th class="border p-2">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr class="odd:bg-white">
                  <td class="border p-2 font-semibold" id="hero-name-cell">Captain Comet</td>
                  <td class="border p-2"><img src="https://placehold.co/80x80/34d399/ffffff?text=CC" class="mx-auto rounded" alt="Captain Comet" /></td>
                  <td class="border p-2">Telekinesis, Flight</td>
                  <td class="border p-2 text-center"><button class="bg-sky-500 text-white px-3 py-1 rounded hover:bg-sky-600">Profile</button></td>
                </tr>
                <tr class="odd:bg-white bg-stone-50">
                  <td class="border p-2 font-semibold">Dr. Aurora</td>
                  <td class="border p-2"><img src="https://placehold.co/80x80/f472b6/ffffff?text=DA" class="mx-auto rounded" alt="Dr. Aurora" /></td>
                  <td class="border p-2">Light Manipulation</td>
                  <td class="border p-2 text-center"><button class="bg-sky-500 text-white px-3 py-1 rounded hover:bg-sky-600">Profile</button></td>
                </tr>
              </tbody>
            </table>
            <div class="mt-4">
              <label for="hero-name-input" class="font-semibold text-sm">Edit First Hero's Name:</label>
              <input type="text" id="hero-name-input" class="w-full mt-1 p-2 border rounded border-stone-300" value="Captain Comet">
            </div>
          </div>
          <div class="code-block">
            <h4 class="font-semibold text-white mb-2">Live Code for First Row</h4>
            <p class="text-sm text-stone-400 mb-4">The HTML for the first hero row will update as you type in the input box above.</p>
            <pre><code id="populate-code-display"></code></pre>
          </div>
        </div>
      </div>
    </section>

    <section id="navigation" class="content-section space-y-8">
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <h2 class="text-2xl font-bold mb-4">3.3 Building Site Navigation</h2>
        <p class="text-stone-600 mb-6">Consistent navigation helps users find their way around your site. A `&lt;nav&gt;` element containing a list of links is the standard. Click a page below to preview its navigation bar and see the code used to create it.</p>
        <div class="grid lg:grid-cols-2 gap-8">
          <div class="space-y-4">
              <h3 class="font-semibold mb-2">Select a Page to Preview its Nav:</h3>
              <div class="flex flex-wrap gap-2">
                <button class="site-map-node p-3 rounded-lg bg-stone-200 hover:bg-sky-200" data-page="index">Home Page</button>
                <button class="site-map-node p-3 rounded-lg bg-stone-200 hover:bg-sky-200" data-page="about">About Page</button>
                <button class="site-map-node p-3 rounded-lg bg-stone-200 hover:bg-sky-200" data-page="heroes">Heroes Page</button>
              </div>
              <h3 class="font-semibold mb-2 mt-4">Navigation Preview:</h3>
              <div id="nav-preview-pane" class="preview-pane min-h-[80px] flex items-center">
                <p class="text-stone-500">Select a page above to see its navigation.</p>
              </div>
          </div>
          <div id="nav-info-box" class="code-block">
            <h4 id="nav-info-title" class="font-semibold text-white mb-2">Navigation Code</h4>
            <div id="nav-info-text">
              <p class="text-sm text-stone-400">The code for the selected page's navigation will appear here.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab-btn');
    const sections = document.querySelectorAll('.content-section');
    let currentTabId = 'create-tables'; // Default tab

    // --- Tab Switching Logic ---
    const showTab = (tabId) => {
        // Fade out the currently active section
        const activeSection = document.querySelector('.content-section.active');
        if (activeSection) {
            activeSection.classList.remove('show');
            setTimeout(() => {
                activeSection.classList.remove('active');
                
                // Find and fade in the new section
                const newSection = document.getElementById(tabId);
                if (newSection) {
                    newSection.classList.add('active');
                    // Use requestAnimationFrame to ensure the 'active' class is applied before 'show'
                    requestAnimationFrame(() => {
                        newSection.classList.add('show');
                    });
                }
            }, 300); // This duration should match the CSS transition time
        } else {
            // For the initial load, just show the section
            const newSection = document.getElementById(tabId);
            if (newSection) {
                newSection.classList.add('active');
                newSection.classList.add('show');
            }
        }
        
        // Update button styles
        tabs.forEach(tab => tab.classList.toggle('active', tab.dataset.tab === tabId));
        currentTabId = tabId;
        history.replaceState(null, '', `#${tabId}`);
    };

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            showTab(tab.dataset.tab);
        });
    });

    // --- Utility for escaping HTML ---
    const escapeHTML = (str) => {
        return str.replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }

    // --- Section 3.1: Table Anatomy ---
    const tableAnatomy = {
        tableCodeDisplay: document.getElementById('table-code-display'),
        tableInfoDesc: document.getElementById('table-info-desc'),
        fullTableHTML: document.getElementById('anatomy-table').outerHTML,
        
        init: function() {
            this.renderCode(this.fullTableHTML);
            document.querySelectorAll('#anatomy-table [data-part]').forEach(el => {
                el.addEventListener('mouseover', (e) => this.handleMouseOver(e));
                el.addEventListener('mouseout', (e) => this.handleMouseOut(e));
            });
        },
        
        renderCode: function(html, highlightPart = '') {
            let code = escapeHTML(html);
            if (highlightPart) {
                const escapedPart = escapeHTML(highlightPart);
                code = code.replace(escapedPart, `<span class="code-highlight">${escapedPart}</span>`);
            }
            this.tableCodeDisplay.innerHTML = code;
        },

        handleMouseOver: function(e) {
            e.stopPropagation();
            const target = e.currentTarget;
            target.classList.add('highlight');
            this.tableInfoDesc.innerHTML = `<strong class="text-sky-400 font-mono">&lt;${target.dataset.part}&gt;</strong>: ${target.dataset.desc}`;
            
            // Highlight the corresponding code
            const partHTML = target.outerHTML;
            this.renderCode(this.fullTableHTML, partHTML.split('>')[0] + '>'); // Highlight opening tag
        },

        handleMouseOut: function(e) {
            e.currentTarget.classList.remove('highlight');
            this.tableInfoDesc.innerHTML = 'Hover over the table preview to learn about its parts.';
            this.renderCode(this.fullTableHTML);
        }
    };
    tableAnatomy.init();


    // --- Section 3.2: Populating Tables ---
    const liveTableEdit = {
        nameCell: document.getElementById('hero-name-cell'),
        nameInput: document.getElementById('hero-name-input'),
        codeDisplay: document.getElementById('populate-code-display'),
        
        init: function() {
            this.nameInput.addEventListener('input', () => this.update());
            this.update(); // Initial render
        },

        update: function() {
            const newName = this.nameInput.value;
            this.nameCell.textContent = newName;
            this.renderCode(newName);
        },

        renderCode: function(name) {
            const escapedName = escapeHTML(name);
            const html = `
<span class="tag">&lt;tr&gt;</span>
  <span class="tag">&lt;td</span> <span class="attr">class=</span><span class="string">"font-semibold"</span><span class="tag">&gt;</span>${escapedName}<span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>&lt;img src="..."&gt;<span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>Telekinesis, Flight<span class="tag">&lt;/td&gt;</span>
  <span class="tag">&lt;td&gt;</span>&lt;button&gt;Profile&lt;/button&gt;<span class="tag">&lt;/td&gt;</span>
<span class="tag">&lt;/tr&gt;</span>`;
            this.codeDisplay.innerHTML = html.trim();
        }
    };
    liveTableEdit.init();


    // --- Section 3.3: Site Navigation ---
    const navPreviewer = {
      navInfoTitle: document.getElementById('nav-info-title'),
      navInfoText: document.getElementById('nav-info-text'),
      navPreviewPane: document.getElementById('nav-preview-pane'),
      
      navData: {
        index: {
          title: 'Home Page Navigation',
          preview: `<nav class="w-full bg-stone-800 text-white p-2 rounded-md flex justify-around">
                      <a href="#" class="font-bold text-sky-400 underline">Home</a>
                      <a href="#" class="hover:underline">About</a>
                      <a href="#" class="hover:underline">Heroes</a>
                    </nav>`,
          code: escapeHTML(`<nav>\n  <ul>\n    <li><a href="index.html" class="active">Home</a></li>\n    <li><a href="about.html">About</a></li>\n    <li><a href="heroes.html">Heroes</a></li>\n  </ul>\n</nav>`)
        },
        about: {
          title: 'About Page Navigation',
          preview: `<nav class="w-full bg-stone-800 text-white p-2 rounded-md flex justify-around">
                      <a href="#" class="hover:underline">Home</a>
                      <a href="#" class="font-bold text-sky-400 underline">About</a>
                      <a href="#" class="hover:underline">Heroes</a>
                    </nav>`,
          code: escapeHTML(`<nav>\n  <ul>\n    <li><a href="index.html">Home</a></li>\n    <li><a href="about.html" class="active">About</a></li>\n    <li><a href="heroes.html">Heroes</a></li>\n  </ul>\n</nav>`)
        },
        heroes: {
          title: 'Heroes Page Navigation',
          preview: `<nav class="w-full bg-stone-800 text-white p-2 rounded-md flex justify-around">
                      <a href="#" class="hover:underline">Home</a>
                      <a href="#" class="hover:underline">About</a>
                      <a href="#" class="font-bold text-sky-400 underline">Heroes</a>
                    </nav>`,
          code: escapeHTML(`<nav>\n  <ul>\n    <li><a href="index.html">Home</a></li>\n    <li><a href="about.html">About</a></li>\n    <li><a href="heroes.html" class="active">Heroes</a></li>\n  </ul>\n</nav>`)
        }
      },
      
      init: function() {
        document.querySelectorAll('.site-map-node').forEach(node => {
          node.addEventListener('click', (e) => this.showNav(e.currentTarget));
        });
      },
      
      showNav: function(node) {
        const pageId = node.dataset.page;
        const data = this.navData[pageId];
        
        this.navInfoTitle.textContent = data.title;
        this.navInfoText.innerHTML = `<pre><code>${data.code}</code></pre>`;
        this.navPreviewPane.innerHTML = data.preview;
        
        document.querySelectorAll('.site-map-node').forEach(n => n.classList.remove('highlight', 'bg-sky-200'));
        node.classList.add('highlight', 'bg-sky-200');
      }
    };
    navPreviewer.init();
    
    // --- Initial Load ---
    const initialTabId = window.location.hash?.substring(1) || 'create-tables';
    showTab(initialTabId);
});
</script>

</body>
</html>
